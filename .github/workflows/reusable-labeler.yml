# file: .github/workflows/reusable-labeler.yml
# version: 1.0.0
# guid: a1b2c3d4-e5f6-47a8-b9c0-d1e2f3a4b5c6

name: Reusable Pull Request Labeler

on:
  workflow_call:
    inputs:
      configuration-path:
        description: "Path to the labeler configuration file"
        required: false
        default: ".github/labeler.yml"
        type: string
      sync-labels:
        description: "Whether to remove labels when matching files are reverted"
        required: false
        default: false
        type: boolean
      dot:
        description: "Whether to auto-include paths starting with dot (e.g. .github)"
        required: false
        default: true
        type: boolean
      pr-number:
        description: "The number(s) of pull request to update, rather than detecting from workflow context"
        required: false
        default: ""
        type: string
    secrets:
      github-token:
        description: "GitHub token with necessary permissions for labeling"
        required: true

jobs:
  labeler:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      pull-requests: write
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Apply labels to pull request
        uses: actions/labeler@v5
        with:
          repo-token: ${{ secrets.github-token }}
          configuration-path: ${{ inputs.configuration-path }}
          sync-labels: ${{ inputs.sync-labels }}
          dot: ${{ inputs.dot }}
          pr-number: ${{ inputs.pr-number }}
