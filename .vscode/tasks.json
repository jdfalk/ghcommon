{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Buf Generate with Output",
      "type": "shell",
      "command": "copilot-agent-util",
      "args": ["buf", "generate"],
      "options": { "cwd": "${workspaceFolder}" },
      "group": "build",
      "isBackground": false,
      "problemMatcher": []
    },
    {
      "label": "Buf Generate Module",
      "type": "shell",
      "command": "copilot-agent-util",
      "args": ["buf", "generate", "--module", "${input:module}"],
      "options": { "cwd": "${workspaceFolder}" },
      "group": "build",
      "isBackground": false,
      "problemMatcher": []
    },
    {
      "label": "Buf Lint with Output",
      "type": "shell",
      "command": "copilot-agent-util",
      "args": ["buf", "lint"],
      "options": { "cwd": "${workspaceFolder}" },
      "group": "build",
      "isBackground": false,
      "problemMatcher": []
    },
    {
      "label": "Buf Lint Module",
      "type": "shell",
      "command": "copilot-agent-util",
      "args": ["buf", "lint", "--module", "${input:module}"],
      "options": { "cwd": "${workspaceFolder}" },
      "group": "build",
      "isBackground": false,
      "problemMatcher": []
    },
    {
      "label": "Buf Check All Proto Files",
      "type": "shell",
      "command": "sh",
      "args": [
        "-c",
        "find pkg -name '*.proto' -type f | while read file; do echo \"=== $file ===\"; buf lint --path \"$file\" 2>&1 | grep -E '(error|Error|file does not exist)' || echo 'OK'; done"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "group": "build",
      "isBackground": false,
      "problemMatcher": []
    },
    {
      "label": "Buf Generate with Args File",
      "type": "shell",
      "command": "copilot-agent-util",
      "args": ["--args-file", "copilot-util-args", "buf", "generate"],
      "options": { "cwd": "${workspaceFolder}" },
      "group": "build",
      "isBackground": false,
      "problemMatcher": []
    },
    {
      "label": "Buf Lint with Args File",
      "type": "shell",
      "command": "copilot-agent-util",
      "args": ["--args-file", "copilot-util-args", "buf", "lint"],
      "options": { "cwd": "${workspaceFolder}" },
      "group": "build",
      "isBackground": false,
      "problemMatcher": []
    },
    {
      "label": "Validate Linter Configs",
      "type": "shell",
      "command": "python3",
      "args": [
        "${workspaceFolder}/scripts/validate-linter-configs.py",
        "--verbose"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "group": "test",
      "isBackground": false,
      "detail": "Validate all linter configuration files against Google Style Guides"
    },
    {
      "label": "Run Super Linter in Docker (CI Mode)",
      "type": "shell",
      "command": "docker",
      "args": [
        "run",
        "--rm",
        "-e",
        "RUN_LOCAL=true",
        "-e",
        "USE_FIND_ALGORITHM=true",
        "-e",
        "VALIDATE_ALL_CODEBASE=true",
        "-v",
        "${workspaceFolder}:/tmp/lint:ro",
        "--env-file",
        "${workspaceFolder}/super-linter-ci.env",
        "ghcr.io/super-linter/super-linter:latest"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "group": "test",
      "isBackground": false,
      "detail": "Run Super Linter in Docker container with CI configuration"
    },
    {
      "label": "Run Super Linter in Docker (PR Mode)",
      "type": "shell",
      "command": "docker",
      "args": [
        "run",
        "--rm",
        "-e",
        "RUN_LOCAL=true",
        "-e",
        "USE_FIND_ALGORITHM=true",
        "-e",
        "VALIDATE_ALL_CODEBASE=false",
        "-v",
        "${workspaceFolder}:/tmp/lint:ro",
        "--env-file",
        "${workspaceFolder}/super-linter-pr.env",
        "ghcr.io/super-linter/super-linter:latest"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "group": "test",
      "isBackground": false,
      "detail": "Run Super Linter in Docker container with PR auto-fix configuration"
    },
    {
      "label": "Run Super Linter in Docker (Test Minimal)",
      "type": "shell",
      "command": "docker",
      "args": [
        "run",
        "--rm",
        "-e",
        "RUN_LOCAL=true",
        "-e",
        "USE_FIND_ALGORITHM=true",
        "-e",
        "VALIDATE_ALL_CODEBASE=true",
        "-v",
        "${workspaceFolder}:/tmp/lint:ro",
        "--env-file",
        "${workspaceFolder}/.github/test-configs/test-minimal.env",
        "ghcr.io/super-linter/super-linter:latest"
      ],
      "options": { "cwd": "${workspaceFolder}" },
      "group": "test",
      "isBackground": false,
      "detail": "Run Super Linter in Docker with minimal test configuration"
    }
  ],
  "inputs": [
    {
      "id": "module",
      "description": "Module to generate (e.g., auth, config, metrics)",
      "default": "auth",
      "type": "promptString"
    },
    {
      "id": "filePattern",
      "description": "File pattern to add (e.g., '*.proto', 'pkg/auth/', '**/*.go')",
      "default": "*.proto",
      "type": "promptString"
    }
  ]
}
